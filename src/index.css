/* src/index.css */

/* =========================
   Smooth theme switch with gradient cross-fade
   - Gradients don't animate -> we cross-fade opacity between two fixed layers
   - UI still transitions ONLY background-color + color (no layout jiggles)
========================= */

:root{
  --theme-dur: 240ms;
  --theme-ease: cubic-bezier(0.16, 1, 0.3, 1);

  /* Surfaces */
  --app-bg: #ffffff;
  --app-ink: #0f172a;

  /* ✅ Two separate gradients (never swapped via CSS vars) */
  --glow-light:
    radial-gradient(900px 520px at 18% 10%, rgba(37,99,235,.14) 0%, rgba(37,99,235,0) 60%),
    radial-gradient(900px 520px at 86% 18%, rgba(168,85,247,.12) 0%, rgba(168,85,247,0) 60%);

  --glow-dark:
    radial-gradient(900px 520px at 18% 10%, rgba(59,130,246,.18) 0%, rgba(59,130,246,0) 62%),
    radial-gradient(900px 520px at 86% 18%, rgba(168,85,247,.16) 0%, rgba(168,85,247,0) 62%);
}

/* Support BOTH selectors */
html.dark,
html[data-theme="dark"]{
  --app-bg: #060a18;
  --app-ink: #e5e7eb;
}

html, body{
  height: 100%;
}

:root{
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html, body, #root{
  height: 100%;
  width: 100%;
  margin: 0;
}

*{ box-sizing: border-box; }

/* Prevent “white flash” behind body */
html{
  background-color: var(--app-bg);
  color: var(--app-ink);
  color-scheme: light;
}
html.dark,
html[data-theme="dark"]{
  color-scheme: dark;
}

/* ✅ Important: no Vite template flex-centering */
body{
  display: block;
  min-width: 320px;
  min-height: 100vh;
  margin: 0;
  overflow-x: hidden;

  background-color: var(--app-bg);
  color: var(--app-ink);

  -webkit-text-size-adjust: 100%;

  /* Ensures pseudo layers behave predictably */
  position: relative;
}

/* App content above glow layers */
#root{
  position: relative;
  z-index: 1;
}

/* =========================
   ✅ Gradient cross-fade layers
   body::before = light gradient
   body::after  = dark gradient
   We only animate opacity (paint-only, no jiggle)
========================= */

body::before,
body::after{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;

  /* behind app */
  z-index: 0;

  /* Helps iOS Safari avoid flicker */
  will-change: opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  contain: paint;

  /* IMPORTANT: only enable transitions during switching */
  transition: none;
}

/* Light layer visible by default */
body::before{
  background: var(--glow-light);
  opacity: 0.90;
}

/* Dark layer hidden by default */
body::after{
  background: var(--glow-dark);
  opacity: 0;
}

/* In dark mode, swap opacities (no gradient swapping!) */
html.dark body::before,
html[data-theme="dark"] body::before{
  opacity: 0;
}

html.dark body::after,
html[data-theme="dark"] body::after{
  opacity: 0.90;
}

/* Enable opacity cross-fade ONLY during switching */
html.theme-switching body::before,
html.theme-switching body::after{
  transition: opacity var(--theme-dur) var(--theme-ease);
}

/* =========================
   Smooth UI transition (NO JIGGLE)
   ONLY animate background-color + color
========================= */

html.theme-switching body{
  transition:
    background-color var(--theme-dur) var(--theme-ease),
    color var(--theme-dur) var(--theme-ease);
}

/* Scoped: body subtree only (don’t touch our fixed background layers) */
html.theme-switching body,
html.theme-switching body *{
  transition-property: background-color, color !important;
  transition-duration: var(--theme-dur) !important;
  transition-timing-function: var(--theme-ease) !important;
  transition-delay: 0ms !important;
}

/* If you use ::before/::after for card surfaces, keep this.
   (Still scoped to descendants; not the body background layers.) */
html.theme-switching body *::before,
html.theme-switching body *::after{
  transition-property: background-color, color !important;
  transition-duration: var(--theme-dur) !important;
  transition-timing-function: var(--theme-ease) !important;
  transition-delay: 0ms !important;
}

/* Prevent page-level gradients from competing (common source of “still glitchy”) */
.pPage{
  background: transparent !important;
  background-color: transparent !important;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  html.theme-switching body,
  html.theme-switching body *,
  html.theme-switching body *::before,
  html.theme-switching body *::after{
    transition: none !important;
  }
  html.theme-switching body::before,
  html.theme-switching body::after{
    transition: none !important;
  }
}

/* Keep your base link/button behaviors */
a{
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover{
  color: #535bf2;
}

button{
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover{
  border-color: #646cff;
}
button:focus,
button:focus-visible{
  outline: 4px auto -webkit-focus-ring-color;
}
